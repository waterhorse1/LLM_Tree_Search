{
    "summary": "This script processes GSM8K data, deduplicates and samples data files, creates three output episodes named with \"gsm8k_train_cot_sample_offline_sft_k100_ep\". It uses split_two_test.py for splitting into training and testing sets, and merge.py for merging training files. The scripts utilize environment variables such as ${OUTPUT_DIR}, ${file_prefix}, $N, sample17x3.jsonl.",
    "details": [
        {
            "comment": "This script processes GSM8K data by deduplicating and sampling data files. It creates processed output files for three different episodes, each containing deduplicated and sampled data. The resulting files are named with the prefix \"gsm8k_train_cot_sample_offline_sft_k100_ep\" followed by the episode number, deduped, and then sampled with a sample size of 17. These files will be chosen by split_two_test.py if their names contain \"dedup\".",
            "location": "\"/media/root/Toshiba XG3/works/LLM_Tree_Search/docs/src/tsllm/offline_rl/gsm8k_data/process.sh\":0-31",
            "content": "set -e\nINPUT_DIR=\"gsm8k_data/cot_sample\"\nOUTPUT_DIR=\"gsm8k_data/processed\"\nmkdir -p $OUTPUT_DIR\nN=17\nfile_prefix=\"gsm8k_train_cot_sample_offline_sft_k100_ep1\"\npython dedup.py \\\n    --input_path ${INPUT_DIR}/${file_prefix}.jsonl \\\n    --output_path ${OUTPUT_DIR}/${file_prefix}_dedup.jsonl\npython sample.py \\\n    --input_path ${OUTPUT_DIR}/${file_prefix}_dedup.jsonl \\\n    --output_path ${OUTPUT_DIR}/${file_prefix}_dedup_sample${N}.jsonl \\\n    -n $N\nfile_prefix=\"gsm8k_train_cot_sample_offline_sft_k100_ep2\"\npython dedup.py \\\n    --input_path ${INPUT_DIR}/${file_prefix}.jsonl \\\n    --output_path ${OUTPUT_DIR}/${file_prefix}_dedup.jsonl\npython sample.py \\\n    --input_path ${OUTPUT_DIR}/${file_prefix}_dedup.jsonl \\\n    --output_path ${OUTPUT_DIR}/${file_prefix}_dedup_sample${N}.jsonl \\\n    -n $N\nfile_prefix=\"gsm8k_train_cot_sample_offline_sft_k100_ep3\"\npython dedup.py \\\n    --input_path ${INPUT_DIR}/${file_prefix}.jsonl \\\n    --output_path ${OUTPUT_DIR}/${file_prefix}_dedup.jsonl\n# split_two_test.py will choose files encswith \"dedup\""
        },
        {
            "comment": "This code executes two Python scripts: \"split_two_test.py\" and \"merge.py\". The former splits the data into training and testing sets, and the latter merges three training files into one. It uses environment variables such as ${OUTPUT_DIR}, ${file_prefix}, $N, and sample17x3.jsonl.",
            "location": "\"/media/root/Toshiba XG3/works/LLM_Tree_Search/docs/src/tsllm/offline_rl/gsm8k_data/process.sh\":32-41",
            "content": "python split_two_test.py \\\n    --train_data_prefix ${OUTPUT_DIR}/${file_prefix} \\\n    --train_num $N \\\n    --train_test_num 3\npython merge.py \\\n    --input_paths ${OUTPUT_DIR}/gsm8k_train_cot_sample_offline_sft_k100_ep1_dedup_sample17.jsonl \\\n    ${OUTPUT_DIR}/gsm8k_train_cot_sample_offline_sft_k100_ep2_dedup_sample17.jsonl \\\n    ${OUTPUT_DIR}/gsm8k_train_cot_sample_offline_sft_k100_ep3_dedup_sample17.jsonl \\\n    --output_path ${OUTPUT_DIR}/gsm8k_train_cot_sample_sft_k100_merged_dedup_sample17x3.jsonl"
        }
    ]
}